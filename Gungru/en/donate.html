<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Donate — Gaden Shartse Gungru Khangtsen Monastery</title>
    <meta name="description" content="Support the monks of Gungru Khangtsen through donations, sponsorships, and offerings.">
    <link rel="stylesheet" href="../assets/css/style.css">
</head>
<body>

    <!-- Navigation -->
    <nav class="site-nav" id="siteNav">
        <div class="site-nav__inner">
            <a href="index.html" class="site-nav__brand">
                <img src="../assets/images/logo.png" alt="Gungru Khangtsen">
                <span>Gungru Khangtsen</span>
            </a>
            <button class="nav-toggle" onclick="document.querySelector('.site-nav__links').classList.toggle('open')" aria-label="Toggle menu">
                <span></span><span></span><span></span>
            </button>
            <ul class="site-nav__links">
                <li><a href="index.html">Home</a></li>
                <li><a href="general-understanding.html">General Understanding</a></li>
                <li><a href="donate.html" class="site-nav__cta active">
                    <span>&#9825;</span>
                    <span>Donate</span>
                </a></li>
            </ul>
        </div>
    </nav>

    <!-- Hero -->
    <section class="hero">
        <div class="hero__orb hero__orb--1"></div>
        <div class="hero__orb hero__orb--2"></div>
        <div class="hero__orb hero__orb--3"></div>

        <div class="hero__content">
            <div class="hero__location">
                <span>&#128205;</span>
                <span>Mundgod, Karnataka, India</span>
            </div>

            <h1 class="hero__title">
                Gaden Shartse<br>
                <em>Gungru Khangtsen</em><br>
                Monastery
            </h1>

            <p class="hero__tagline">
                Supporting the preservation of Tibetan Buddhist wisdom through education, sacred arts, and compassionate action.
            </p>

            <div class="hero__actions">
                <a href="#donate" class="btn btn-primary">
                    <span>&#9825;</span>
                    <span>Make a Donation</span>
                </a>
                <a href="#sponsor" class="btn btn-secondary">Sponsor a Monk</a>
            </div>
        </div>
    </section>

    <!-- About -->
    <section class="about" id="about">
        <div class="about__card reveal">
            <span class="about__icon">&#127748;</span>
            <h2 class="about__title">Preserving a Living Tradition</h2>
            <p class="about__text">
                Gungru Khangtsen is one of eleven monastic houses within <strong>Gaden Shartse Monastery</strong> in Mundgod, India &mdash; home to the exiled Tibetan monastic community since 1966. Our monks dedicate their lives to the study of <strong>Buddhist philosophy, debate, and meditation</strong>, preserving a tradition stretching back over six centuries. Through annual <strong>USA tours</strong> featuring sacred sand mandala creation, teachings, and traditional ceremonies, we share this wisdom with the world while raising essential funds for the monastery.
            </p>
            <div class="about__badges">
                <div class="about__badge">&#127982; Est. 1409 (Gaden)</div>
                <div class="about__badge">&#128214; 60+ Resident Monks</div>
                <div class="about__badge">&#127758; Annual USA Tours</div>
                <div class="about__badge">&#9784; Sand Mandala Art</div>
            </div>
        </div>
    </section>

    <!-- Donation Section -->
    <section class="donate-section" id="donate">
        <div class="container-narrow">
            <div class="section-header">
                <div class="section-header__label">
                    <span>&#9784;</span>
                    <span>Generosity</span>
                </div>
                <h2 class="section-header__title">Make a Donation</h2>
                <p class="section-header__subtitle">
                    Every offering, no matter the size, directly supports the monks' education, healthcare, and daily sustenance.
                </p>
            </div>

            <div class="donate-card reveal">
                <!-- Frequency Toggle -->
                <div class="freq-toggle">
                    <button class="freq-toggle__btn active" data-freq="one-time" onclick="toggleFreq(this)">One-Time</button>
                    <button class="freq-toggle__btn" data-freq="monthly" onclick="toggleFreq(this)">Monthly</button>
                </div>

                <!-- Currency Selector -->
                <div class="currency-picker">
                    <label for="donationCurrency">Currency:</label>
                    <select id="donationCurrency" onchange="changeCurrency(this.value)">
                        <option value="USD">$ USD</option>
                        <option value="EUR">&euro; EUR</option>
                        <option value="GBP">&pound; GBP</option>
                        <option value="INR">&#8377; INR</option>
                        <option value="JPY">&yen; JPY</option>
                        <option value="CNY">&yen; CNY</option>
                        <option value="CAD">$ CAD</option>
                        <option value="AUD">$ AUD</option>
                        <option value="CHF">Fr CHF</option>
                        <option value="SGD">$ SGD</option>
                        <option value="HKD">$ HKD</option>
                        <option value="TWD">$ TWD</option>
                    </select>
                </div>

                <!-- Preset Amounts (dynamically populated) -->
                <div class="amount-grid" id="amountGrid"></div>

                <!-- Custom Amount -->
                <div class="custom-amount">
                    <input type="text" id="customAmount" placeholder="Enter custom amount" onfocus="clearPresets()">
                    <span class="custom-currency-label" id="customCurrencyLabel">USD</span>
                </div>

                <p class="donate-note" id="monthlyNote" style="display:none;">
                    &#8635; You will be charged monthly. Cancel anytime.
                </p>

                <div class="donate-btn-wrap">
                    <button class="btn btn-primary" onclick="handleDonate()">
                        <span>&#9825;</span>
                        <span>Donate Now</span>
                    </button>
                </div>

                <p class="donate-note">
                    &#128274; Secure payment &middot; Tax-deductible &middot; 80G receipt provided
                </p>
            </div>
        </div>
    </section>

    <!-- Sponsorship -->
    <section class="sponsorship-section" id="sponsor">
        <div class="section-header">
            <div class="section-header__label">
                <span>&#128330;</span>
                <span>Programs</span>
            </div>
            <h2 class="section-header__title">Sponsorship Programs</h2>
            <p class="section-header__subtitle">
                Choose a meaningful way to make a lasting impact on the monastic community.
            </p>
        </div>

        <div class="sponsor-grid">
            <div class="sponsor-card reveal">
                <span class="sponsor-card__icon">&#127834;</span>
                <h3 class="sponsor-card__title">Monk's Daily Meals</h3>
                <div class="sponsor-card__price">
                    <span class="inr">&#8377;3,000</span>
                    <span class="period">/month</span>
                    <span class="usd">($36 USD)</span>
                </div>
                <p class="sponsor-card__desc">Feed one monk for an entire month. Your support provides three nutritious meals daily, essential for the energy monks need for their rigorous study schedule.</p>
                <div class="sponsor-card__action" onclick="selectSponsor(3000)">
                    <span>Sponsor meals</span>
                    <span class="arrow">&rarr;</span>
                </div>
            </div>

            <div class="sponsor-card reveal">
                <span class="sponsor-card__icon">&#128218;</span>
                <h3 class="sponsor-card__title">Education Fund</h3>
                <div class="sponsor-card__price">
                    <span class="inr">&#8377;5,000</span>
                    <span class="period">/month</span>
                    <span class="usd">($60 USD)</span>
                </div>
                <p class="sponsor-card__desc">Support a monk's philosophical studies. Covers textbooks, debate materials, and access to the monastery's library of ancient texts and commentaries.</p>
                <div class="sponsor-card__action" onclick="selectSponsor(5000)">
                    <span>Support education</span>
                    <span class="arrow">&rarr;</span>
                </div>
            </div>

            <div class="sponsor-card reveal">
                <span class="sponsor-card__icon">&#127973;</span>
                <h3 class="sponsor-card__title">Medical Care</h3>
                <div class="sponsor-card__price">
                    <span class="inr">&#8377;2,000</span>
                    <span class="period">/month</span>
                    <span class="usd">($24 USD)</span>
                </div>
                <p class="sponsor-card__desc">Healthcare for elderly monks who have dedicated decades to preservation of the Dharma. Covers medicine, check-ups, and specialist visits.</p>
                <div class="sponsor-card__action" onclick="selectSponsor(2000)">
                    <span>Fund healthcare</span>
                    <span class="arrow">&rarr;</span>
                </div>
            </div>

            <div class="sponsor-card reveal">
                <span class="sponsor-card__icon">&#127959;</span>
                <h3 class="sponsor-card__title">Building Fund</h3>
                <div class="sponsor-card__price">
                    <span class="inr">&#8377;10,000+</span>
                    <span class="usd">($120+ USD)</span>
                </div>
                <p class="sponsor-card__desc">Help restore and maintain the khangtsen's prayer hall, dormitories, and kitchen. Our buildings serve as the physical foundation of monastic life.</p>
                <div class="sponsor-card__action" onclick="selectSponsor(10000)">
                    <span>Contribute to building</span>
                    <span class="arrow">&rarr;</span>
                </div>
            </div>

            <div class="sponsor-card reveal">
                <span class="sponsor-card__icon">&#127912;</span>
                <h3 class="sponsor-card__title">Sacred Arts Tour</h3>
                <div class="sponsor-card__price">
                    <span class="inr">&#8377;25,000+</span>
                    <span class="usd">($300+ USD)</span>
                </div>
                <p class="sponsor-card__desc">Sponsor a sand mandala tour stop in the United States. Your generosity funds travel, materials, and venue costs for monks sharing sacred art.</p>
                <div class="sponsor-card__action" onclick="selectSponsor(25000)">
                    <span>Sponsor a tour</span>
                    <span class="arrow">&rarr;</span>
                </div>
            </div>

            <div class="sponsor-card sponsor-card--lamp reveal">
                <span class="sponsor-card__icon">&#128367;</span>
                <h3 class="sponsor-card__title">Butter Lamp Offering</h3>
                <div class="sponsor-card__price">
                    <span class="inr">&#8377;108</span>
                    <span class="usd">($1.30 USD)</span>
                </div>
                <p class="sponsor-card__desc">Light a butter lamp in your name or in memory of a loved one. The flame symbolizes the dispelling of darkness and the illumination of wisdom.</p>
                <div class="sponsor-card__action" onclick="selectSponsor(108)">
                    <span>Light a lamp</span>
                    <span class="arrow">&rarr;</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Payment Methods -->
    <section class="payment-section" id="payment-methods">
        <div class="container">
            <div class="section-header">
                <div class="section-header__label">
                    <span>&#128179;</span>
                    <span>Payment</span>
                </div>
                <h2 class="section-header__title">Payment Methods</h2>
                <p class="section-header__subtitle">
                    We accept donations from around the world through multiple secure channels.
                </p>
            </div>

            <div class="payment-categories">
                <div class="payment-cat reveal">
                    <div class="payment-cat__label">India &mdash; Digital</div>
                    <div class="payment-cat__title">UPI &amp; Wallets</div>
                    <div class="payment-method"><div class="pm-icon">&#128241;</div><div class="pm-name">Google Pay</div><div class="pm-detail">UPI</div></div>
                    <div class="payment-method"><div class="pm-icon">&#128242;</div><div class="pm-name">PhonePe</div><div class="pm-detail">UPI</div></div>
                    <div class="payment-method"><div class="pm-icon">&#128179;</div><div class="pm-name">Paytm</div><div class="pm-detail">Wallet</div></div>
                    <div class="payment-method"><div class="pm-icon">&#9638;</div><div class="pm-name">UPI QR Code</div></div>
                    <div class="bank-details">
                        <div class="bank-details__row">
                            <span class="label">UPI ID:</span>
                            <span class="value">gungru@upi</span>
                        </div>
                    </div>
                </div>

                <div class="payment-cat reveal">
                    <div class="payment-cat__label">International</div>
                    <div class="payment-cat__title">Cards &amp; Online</div>
                    <div class="payment-method"><div class="pm-icon">&#128179;</div><div class="pm-name">Credit / Debit Card</div><div class="pm-detail">Visa, MC, Amex</div></div>
                    <div class="payment-method"><div class="pm-icon">&#127760;</div><div class="pm-name">Razorpay Checkout</div><div class="pm-detail">All methods</div></div>
                    <div class="payment-method"><div class="pm-icon">&#128176;</div><div class="pm-name">PayPal</div><div class="pm-detail">paypal.me/gungru</div></div>
                    <div class="payment-method"><div class="pm-icon">&#127974;</div><div class="pm-name">Wire Transfer / SWIFT</div><div class="pm-detail">See details below</div></div>
                </div>

                <div class="payment-cat reveal">
                    <div class="payment-cat__label">Cryptocurrency</div>
                    <div class="payment-cat__title">Digital Assets</div>
                    <div class="payment-method"><div class="pm-icon">&#8383;</div><div class="pm-name">Bitcoin (BTC)</div></div>
                    <div class="payment-method"><div class="pm-icon">&#9830;</div><div class="pm-name">Ethereum (ETH)</div></div>
                    <div class="bank-details crypto-details">
                        <div class="crypto-addr">
                            <span class="crypto-addr__label">BTC</span>
                            <code class="crypto-addr__value">bc1qxy2kgdygjrsqtzq2n0yrf...</code>
                            <button class="copy-btn" onclick="copyToClipboard(this, 'bc1qxy2kgdygjrsqtzq2n0yrf')">Copy</button>
                        </div>
                        <div class="crypto-addr">
                            <span class="crypto-addr__label">ETH</span>
                            <code class="crypto-addr__value">0x742d35Cc6634C0532925a3b...</code>
                            <button class="copy-btn" onclick="copyToClipboard(this, '0x742d35Cc6634C0532925a3b')">Copy</button>
                        </div>
                    </div>
                </div>

                <div class="payment-cat reveal">
                    <div class="payment-cat__label">Offline</div>
                    <div class="payment-cat__title">Bank &amp; Check</div>
                    <div class="payment-method"><div class="pm-icon">&#127974;</div><div class="pm-name">Bank</div><div class="pm-detail">State Bank of India</div></div>
                    <div class="bank-details">
                        <div class="bank-details__row">
                            <span class="label">Account</span>
                            <span class="value">XXXX XXXX 1234</span>
                            <button class="copy-btn" onclick="copyToClipboard(this, 'XXXX XXXX 1234')">Copy</button>
                        </div>
                        <div class="bank-details__row">
                            <span class="label">IFSC</span>
                            <span class="value">SBIN0001234</span>
                            <button class="copy-btn" onclick="copyToClipboard(this, 'SBIN0001234')">Copy</button>
                        </div>
                        <div class="bank-details__row">
                            <span class="label">SWIFT</span>
                            <span class="value">SBININBB</span>
                            <button class="copy-btn" onclick="copyToClipboard(this, 'SBININBB')">Copy</button>
                        </div>
                    </div>
                    <div style="font-size:12px; color: var(--text-dim); margin-top:12px; line-height:1.5;">
                        <strong>Check / Money Order:</strong><br>
                        Gaden Shartse Gungru Khangtsen<br>
                        P.O. Tibetan Colony, Mundgod<br>
                        N. Kanara, Karnataka 581411, India
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Donor Form -->
    <section class="form-section">
        <div class="container-narrow">
            <div class="section-header">
                <div class="section-header__label">
                    <span>&#128221;</span>
                    <span>Your Information</span>
                </div>
                <h2 class="section-header__title">Donor Details</h2>
                <p class="section-header__subtitle">
                    Help us send your receipt and keep you updated on the impact of your generosity.
                </p>
            </div>

            <form class="donor-form reveal" onsubmit="handleFormSubmit(event)">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="donorName">Full Name</label>
                        <input type="text" id="donorName" name="full_name" required>
                    </div>
                    <div class="form-group">
                        <label for="donorEmail">Email Address</label>
                        <input type="email" id="donorEmail" name="email" required>
                    </div>
                    <div class="form-group">
                        <label for="donorPhone">Phone <span class="optional">(optional)</span></label>
                        <input type="tel" id="donorPhone" name="phone">
                    </div>
                    <div class="form-group">
                        <label for="donorCountry">Country</label>
                        <select id="donorCountry" name="country" required>
                            <option value="">Select country</option>
                            <option value="IN">India</option>
                            <option value="US">United States</option>
                            <option value="CA">Canada</option>
                            <option value="GB">United Kingdom</option>
                            <option value="AU">Australia</option>
                            <option value="DE">Germany</option>
                            <option value="FR">France</option>
                            <option value="JP">Japan</option>
                            <option value="TW">Taiwan</option>
                            <option value="SG">Singapore</option>
                            <option value="NP">Nepal</option>
                            <option value="BT">Bhutan</option>
                            <option value="XX">Other</option>
                        </select>
                    </div>
                    <div class="form-divider"></div>
                    <div class="form-group full-width">
                        <label for="donorDedication">Dedication</label>
                        <select id="donorDedication" name="dedication_type">
                            <option value="">No dedication</option>
                            <option value="honor">In honor of...</option>
                            <option value="memory">In memory of...</option>
                            <option value="merit">Dedicated to the merit of...</option>
                        </select>
                    </div>
                    <div class="form-group full-width" id="dedicationNameWrap" style="display:none;">
                        <label for="dedicationName">Dedication name</label>
                        <input type="text" id="dedicationName" name="dedication_name">
                    </div>
                    <div class="form-group full-width">
                        <label for="donorMessage">Message to the Monks <span class="optional">(optional)</span></label>
                        <textarea id="donorMessage" name="message" rows="4"></textarea>
                    </div>
                    <div class="form-divider"></div>
                    <div class="checkbox-group full-width">
                        <input type="checkbox" id="anonCheck" name="is_anonymous">
                        <label for="anonCheck">Make this donation <strong>anonymous</strong></label>
                    </div>
                    <div class="checkbox-group full-width">
                        <input type="checkbox" id="receiptCheck" name="request_receipt" checked>
                        <label for="receiptCheck">Send me a <strong>tax receipt</strong> (80G certificate for Indian donors)</label>
                    </div>
                    <div class="checkbox-group full-width">
                        <input type="checkbox" id="updatesCheck" name="receive_updates">
                        <label for="updatesCheck">Receive occasional updates about the monastery</label>
                    </div>
                    <div class="form-submit">
                        <button type="submit" class="btn btn-primary">Complete Donation</button>
                    </div>
                </div>
            </form>
        </div>
    </section>

    <!-- Footer -->
    <footer class="site-footer">
        <div class="footer-inner">
            <span class="footer-wheel">&#9784;</span>
            <h3 class="footer-name">Gaden Shartse Gungru Khangtsen Monastery</h3>
            <div class="footer-address">
                P.O. Tibetan Colony, Mundgod<br>
                N. Kanara, Karnataka 581411, India<br>
                info@gadengungru.com
            </div>
            <div class="footer-links">
                <a href="index.html">Home</a>
                <a href="general-understanding.html">General Understanding</a>
                <a href="donate.html">Donate</a>
            </div>
            <div class="footer-badges">
                <div class="footer-badge"><span>&#128421;</span><span>Built with AlpacApps Infrastructure</span></div>
                <div class="footer-badge"><span>&#10024;</span><span>Powered by Claude</span></div>
            </div>
            <div class="footer-links" style="margin-bottom: 0; margin-top: 16px;">
                <a href="payment-setup.html" style="font-size: 11px; opacity: 0.25;">&#128736; Payment Setup</a>
            </div>
            <div class="footer-version">v260214.1</div>
            <div class="footer-address" style="margin-top: 20px; font-size: 12px; color: rgba(255,255,255,0.3);">
                Demo &mdash; No real payments are processed
            </div>
        </div>
    </footer>

    <!-- Demo Banner -->
    <div class="demo-banner">
        <span class="demo-dot"></span>
        <span>Demo &mdash; No real payments</span>
    </div>

    <script>
        // ── Multi-Currency System ──
        // Base amounts are in INR. Each currency has pre-computed rounded amounts
        // that are close (~20%) to the INR equivalent, for clean display.

        const CURRENCIES = {
            USD: { symbol: '$',  flag: '\u{1F1FA}\u{1F1F8}', amounts: [6, 12, 60, 120, 300, 600], sponsorAmounts: { 3000: 35, 5000: 60, 2000: 25, 10000: 120, 25000: 300, 108: 1.50 } },
            EUR: { symbol: '\u20AC', flag: '\u{1F1EA}\u{1F1FA}', amounts: [5, 10, 50, 100, 250, 500], sponsorAmounts: { 3000: 35, 5000: 55, 2000: 25, 10000: 110, 25000: 275, 108: 1.25 } },
            GBP: { symbol: '\u00A3', flag: '\u{1F1EC}\u{1F1E7}', amounts: [5, 10, 45, 90, 250, 500], sponsorAmounts: { 3000: 30, 5000: 50, 2000: 20, 10000: 100, 25000: 250, 108: 1 } },
            INR: { symbol: '\u20B9', flag: '\u{1F1EE}\u{1F1F3}', amounts: [500, 1000, 5000, 10000, 25000, 50000], sponsorAmounts: { 3000: 3000, 5000: 5000, 2000: 2000, 10000: 10000, 25000: 25000, 108: 108 } },
            JPY: { symbol: '\u00A5', flag: '\u{1F1EF}\u{1F1F5}', amounts: [1000, 2000, 8000, 18000, 45000, 90000], sponsorAmounts: { 3000: 5500, 5000: 9000, 2000: 3500, 10000: 18000, 25000: 45000, 108: 200 } },
            CNY: { symbol: '\u00A5', flag: '\u{1F1E8}\u{1F1F3}', amounts: [40, 80, 400, 850, 2000, 4000], sponsorAmounts: { 3000: 260, 5000: 430, 2000: 170, 10000: 860, 25000: 2100, 108: 10 } },
            CAD: { symbol: '$',  flag: '\u{1F1E8}\u{1F1E6}', amounts: [8, 15, 80, 160, 400, 800], sponsorAmounts: { 3000: 50, 5000: 80, 2000: 35, 10000: 170, 25000: 400, 108: 2 } },
            AUD: { symbol: '$',  flag: '\u{1F1E6}\u{1F1FA}', amounts: [10, 20, 90, 180, 450, 900], sponsorAmounts: { 3000: 55, 5000: 90, 2000: 35, 10000: 180, 25000: 450, 108: 2 } },
            CHF: { symbol: 'Fr', flag: '\u{1F1E8}\u{1F1ED}', amounts: [5, 10, 50, 100, 250, 500], sponsorAmounts: { 3000: 35, 5000: 55, 2000: 25, 10000: 110, 25000: 275, 108: 1.50 } },
            SGD: { symbol: '$',  flag: '\u{1F1F8}\u{1F1EC}', amounts: [8, 15, 80, 160, 400, 800], sponsorAmounts: { 3000: 50, 5000: 80, 2000: 30, 10000: 160, 25000: 400, 108: 2 } },
            HKD: { symbol: '$',  flag: '\u{1F1ED}\u{1F1F0}', amounts: [50, 100, 450, 950, 2500, 5000], sponsorAmounts: { 3000: 280, 5000: 470, 2000: 190, 10000: 940, 25000: 2400, 108: 10 } },
            TWD: { symbol: '$',  flag: '\u{1F1F9}\u{1F1FC}', amounts: [200, 400, 2000, 4000, 10000, 20000], sponsorAmounts: { 3000: 1100, 5000: 1800, 2000: 700, 10000: 3600, 25000: 9000, 108: 40 } }
        };

        // Language to default currency mapping
        const LANG_CURRENCY = { en: 'USD', hi: 'INR', kn: 'INR', bo: 'INR', zh: 'CNY', fr: 'EUR', es: 'EUR' };

        // Detect language from <html lang>, URL path, or default to 'en'
        function detectLang() {
            const htmlLang = document.documentElement.lang || '';
            if (LANG_CURRENCY[htmlLang]) return htmlLang;
            const pathMatch = window.location.pathname.match(/\/([a-z]{2})\//);
            if (pathMatch && LANG_CURRENCY[pathMatch[1]]) return pathMatch[1];
            return 'en';
        }

        let currentCurrency = LANG_CURRENCY[detectLang()] || 'USD';

        // Format amount for display
        function fmtAmt(amount, currency) {
            const c = CURRENCIES[currency];
            if (currency === 'JPY' || (Number.isInteger(amount) && amount >= 100)) {
                return c.symbol + amount.toLocaleString();
            }
            if (amount < 1) return c.symbol + amount.toFixed(2);
            if (amount % 1 !== 0) return c.symbol + amount.toFixed(2);
            return c.symbol + amount.toLocaleString();
        }

        // Build preset amount grid
        function buildAmountGrid(currency) {
            const grid = document.getElementById('amountGrid');
            const c = CURRENCIES[currency];
            grid.innerHTML = '';
            c.amounts.forEach((amt, i) => {
                const id = 'amt' + (i + 1);
                const radio = document.createElement('input');
                radio.type = 'radio'; radio.id = id; radio.name = 'amount'; radio.value = amt;
                const label = document.createElement('label');
                label.htmlFor = id;
                const mainSpan = document.createElement('span');
                mainSpan.className = 'amount-main';
                mainSpan.textContent = fmtAmt(amt, currency);
                const codeSpan = document.createElement('span');
                codeSpan.className = 'amount-code';
                codeSpan.textContent = currency;
                label.appendChild(mainSpan);
                label.appendChild(codeSpan);
                grid.appendChild(radio);
                grid.appendChild(label);
            });
        }

        // Update sponsorship cards
        function updateSponsorCards(currency) {
            const c = CURRENCIES[currency];
            document.querySelectorAll('.sponsor-card').forEach(card => {
                const actionEl = card.querySelector('.sponsor-card__action');
                if (!actionEl) return;
                const onclickStr = actionEl.getAttribute('onclick');
                const match = onclickStr && onclickStr.match(/selectSponsor\((\d+)/);
                if (!match) return;
                const inrAmt = parseInt(match[1]);
                const localAmt = c.sponsorAmounts[inrAmt];
                if (localAmt === undefined) return;
                const priceEl = card.querySelector('.sponsor-card__price');
                if (!priceEl) return;
                const inrSpan = priceEl.querySelector('.inr');
                const usdSpan = priceEl.querySelector('.usd');
                if (currency === 'INR') {
                    if (inrSpan) inrSpan.textContent = fmtAmt(localAmt, currency);
                    if (usdSpan) usdSpan.textContent = '';
                } else {
                    if (inrSpan) inrSpan.textContent = fmtAmt(localAmt, currency);
                    if (usdSpan) usdSpan.textContent = '';
                }
            });
        }

        // Change currency
        function changeCurrency(currency) {
            currentCurrency = currency;
            buildAmountGrid(currency);
            updateSponsorCards(currency);
            document.getElementById('customCurrencyLabel').textContent = currency;
            document.getElementById('customAmount').value = '';
        }

        // Initialize on load
        function initCurrency() {
            const select = document.getElementById('donationCurrency');
            select.value = currentCurrency;
            changeCurrency(currentCurrency);
        }

        // ── Core Functions ──

        // Navbar scroll
        const nav = document.getElementById('siteNav');
        window.addEventListener('scroll', () => { nav.classList.toggle('scrolled', window.scrollY > 20); });

        // Frequency toggle
        function toggleFreq(btn) {
            document.querySelectorAll('.freq-toggle__btn').forEach(b => { b.classList.remove('active'); });
            btn.classList.add('active');
            document.getElementById('monthlyNote').style.display = btn.dataset.freq === 'monthly' ? 'block' : 'none';
        }

        // Clear presets
        function clearPresets() {
            document.querySelectorAll('.amount-grid input[type="radio"]').forEach(r => { r.checked = false; });
        }

        // Handle donate (demo)
        function handleDonate() {
            const selected = document.querySelector('.amount-grid input[type="radio"]:checked');
            const custom = document.getElementById('customAmount').value;
            const isMonthly = document.querySelector('.freq-toggle__btn.active').dataset.freq === 'monthly';
            let amount = '';
            if (selected) {
                amount = fmtAmt(parseFloat(selected.value), currentCurrency);
            } else if (custom) {
                amount = fmtAmt(parseFloat(custom), currentCurrency);
            } else {
                showToast('Please select or enter a donation amount.', 'info');
                return;
            }
            showToast('Thank you! In production, payment would open for ' + amount + ' ' + currentCurrency + (isMonthly ? ' monthly' : '') + '.', 'success');
        }

        // Sponsor card click
        function selectSponsor(inrAmount) {
            document.getElementById('donate').scrollIntoView({ behavior: 'smooth' });
            setTimeout(() => {
                if (inrAmount >= 2000) toggleFreq(document.querySelector('.freq-toggle__btn[data-freq="monthly"]'));
                const c = CURRENCIES[currentCurrency];
                const localAmt = c.sponsorAmounts[inrAmount];
                const radio = document.querySelector('.amount-grid input[value="' + localAmt + '"]');
                if (radio) { radio.checked = true; document.getElementById('customAmount').value = ''; }
                else { clearPresets(); document.getElementById('customAmount').value = localAmt; }
            }, 500);
        }

        // Form submit (demo)
        function handleFormSubmit(e) {
            e.preventDefault();
            const name = document.getElementById('donorName').value || 'Friend';
            showToast('Thank you, ' + name + '! In production, your donation would be processed now.', 'success');
        }

        // Copy to clipboard
        function copyToClipboard(btn, text) {
            navigator.clipboard.writeText(text).then(() => {
                btn.textContent = 'Copied';
                btn.classList.add('copied');
                setTimeout(() => { btn.textContent = 'Copy'; btn.classList.remove('copied'); }, 2000);
            });
        }

        // Dedication field toggle
        document.getElementById('donorDedication').addEventListener('change', function() {
            document.getElementById('dedicationNameWrap').style.display = this.value ? 'flex' : 'none';
        });

        // Toast notification
        function showToast(message, type) {
            const existing = document.querySelector('.toast-notification');
            if (existing) existing.remove();
            const toast = document.createElement('div');
            toast.className = 'toast-notification';
            toast.style.cssText = 'position:fixed;top:80px;left:50%;transform:translateX(-50%) translateY(-10px);z-index:10000;padding:14px 24px;border-radius:12px;font-size:14px;font-weight:500;font-family:DM Sans,sans-serif;max-width:90vw;text-align:center;opacity:0;transition:all 0.3s ease;box-shadow:0 8px 32px rgba(0,0,0,0.12);';
            if (type === 'success') { toast.style.background = '#f0fdf4'; toast.style.color = '#166534'; toast.style.border = '1px solid #bbf7d0'; }
            else { toast.style.background = '#fffbeb'; toast.style.color = '#92400e'; toast.style.border = '1px solid #fde68a'; }
            toast.textContent = message;
            document.body.appendChild(toast);
            requestAnimationFrame(() => { toast.style.opacity = '1'; toast.style.transform = 'translateX(-50%) translateY(0)'; });
            setTimeout(() => { toast.style.opacity = '0'; toast.style.transform = 'translateX(-50%) translateY(-10px)'; setTimeout(() => toast.remove(), 300); }, 4000);
        }

        // Scroll reveal
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('visible'); });
        }, { threshold: 0.1, rootMargin: '0px 0px -40px 0px' });
        document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

        // Initialize currency on page load
        initCurrency();
    </script>
</body>
</html>
